{% extends 'base.html.twig' %}

{% block title %} Sylab - Tu achètes !{% endblock %}

{% block stylesheets %}
    {{ parent() }}
{% endblock %}

{% block body %}
    <div class="jumbotron">
        {# Show flash messages #}
        {% for message in app.flashes('success') %}
            <div class="alert alert-success">
                {{ message }}
            </div>
        {% endfor %}
        <div class="container">
            <div class="row">
                <div class="col-md-8">
                    <img id="img-size" src="{{ asset('upload/img/image_bien/') }}{{ propriety.image }}" alt="picture proprety">
                </div>
                <div class="col-md-4">
                    <h1>{{ propriety.name }}</h1>
                    <h2>{{ propriety.nbrrooms }} pieces - {{ propriety.surface }} m2</h2>
                    <div class="text" style="font-size: 4rem;font-weight: bold;">{{ propriety.price| number_format(0, ",", " ") }}€</div>
                    <div id="myBtn" class="btn btn-primary mt-3"> Contacter l'agence</div>
                </div>

                {# Modal bootstrap #}
                <div class="modal fade" id="myModal" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4><span class="glyphicon glyphicon-lock"></span>Contacter</h4>
                            </div>
                            <div class="modal-body">
                                {{ form_start(form) }}
                                <div class="row">
                                    <div class="col">{{ form_row(form.firstname) }}</div>
                                    <div class="col">{{ form_row(form.lastname) }}</div>
                                </div>
                                <div class="row">
                                    <div class="col">{{ form_row(form.email) }}</div>
                                    <div class="col">{{ form_row(form.phone) }}</div>
                                </div>
                                {{ form_rest(form) }}
                            </div>
                            <div class="form-group">
                                <button id="btnSubmit" class="btn btn-primary btn-block">Envoyer le mail</button>
                            </div>
                            {{ form_end(form) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container mt-4">
        <p>{{ propriety.description | nl2br }}</p>
        <div class="row">
            <div class="col-md-12">
                <h2 class="mb-3">Caractéristiques</h2>
                <table class="table table-striped">
                    <tr>
                        <td>Surface habitable</td>
                        <td>{{ propriety.surface }} m²</td>
                    </tr>
                    <tr>
                        <td>Pieces</td>
                        <td>{{ propriety.nbrrooms }} pieces</td>
                    </tr>
                    <tr>
                        <td>Chambres</td>
                        <td>{{ propriety.nbrbedrooms }} chambres</td>
                    </tr>
                    <tr>
                        <td>Adresse</td>
                        <td>{{ propriety.address }}</td>
                    </tr>
                    <tr>
                        <td>Ville</td>
                        <td>{{ propriety.zipcode }} {{ propriety.city }}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div id="footer" class="mt-5">
        <div class="container">
            <div id="footer-center" class="row pt-5 pb-5">
                <div class="col-md-3 text-light">
                    <h2>Sylab</h2>
                    <p>Slogan du site mdrr</p>
                </div>

                <div class="col-md-3">
                    <a href="{{ path('buy') }}"><h5>Acheter</h5></a>
                    <a href="{{ path('sell') }}"><h5>Vendre</h5></a>
                </div>

                <div class="col-md-3">
                    <h5 class="text-light">Réseaux sociaux</h5>
                    <a href="https://www.facebook.com" target="_blank">Facebook</a><br>
                    <a href="https://www.twitter.com" target="_blank">Twitter</a><br>
                </div>

                <div class="col-md-3">
                    <h5 class="text-light">Contact</h5>
                    <a href="tel:0556900010">Tél : 05 56 90 00 10</a><br>
                    <a href="mailto:contact@sylab.fr">Email : contact@sylab.fr</a><br>
                </div>
            </div>
        </div>
    </div> 

    <div id="copyright">
        <p>Copyright - Quentin Gans & Lucas Consejo</p>
    </div>
{% endblock %}

{% block javascripts %}
    <script type="text/javascript">
        $('.navbar').css('background-color', "#3c5b52");
        
        $(document).ready(function(){
            $("#myBtn").click(function(){
                $("#myModal").modal();
            });
            $("#btnSubmit").click(function(){
                $("#myBtn").css('visibility', "hidden");
            });
        });
    </script>
{% endblock %}